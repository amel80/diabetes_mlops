<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diabetes Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        async function submitForm(event) {
            event.preventDefault();  // Empêche la soumission classique du formulaire
            
            // Récupérer les données du formulaire
            const formData = new FormData(document.getElementById("predictionForm"));
            const data = {
                data: [
                    [
                        formData.get("Pregnancies"),
                        formData.get("Glucose"),
                        formData.get("BloodPressure"),
                        formData.get("SkinThickness"),
                        formData.get("Insulin"),
                        formData.get("BMI"),
                        formData.get("DiabetesPedigreeFunction"),
                        formData.get("Age")
                    ]
                ]
            };
            
            try {
                // Envoyer les données au serveur en format JSON
                const response = await fetch("/predict", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)  // Convertir l'objet JavaScript en JSON
                });
                

                // Lire la réponse JSON
                const result = await response.json();

                // Afficher la prédiction
                const predictionDiv = document.getElementById("predictionResult");
                predictionDiv.innerHTML = `<h2>Prediction: ${result.predictions}</h2>`;
            } catch (error) {
                console.error("Error:", error);
            }
        }
    </script>
</head>
<body>
    <h1>Welcome to the Diabetes Prediction App</h1>
    <p>Enter patient data below to make a prediction:</p>

    <form id="predictionForm" onsubmit="submitForm(event)">
        <label for="Pregnancies">Pregnancies:</label>
        <input type="number" name="Pregnancies" required><br>

        <label for="Glucose">Glucose:</label>
        <input type="number" name="Glucose" required><br>

        <label for="BloodPressure">BloodPressure:</label>
        <input type="number" name="BloodPressure" required><br>

        <label for="SkinThickness">SkinThickness:</label>
        <input type="number" name="SkinThickness" required><br>

        <label for="Insulin">Insulin:</label>
        <input type="number" name="Insulin" required><br>

        <label for="BMI">BMI:</label>
        <input type="number" name="BMI" required><br>

        <label for="DiabetesPedigreeFunction">DiabetesPedigreeFunction:</label>
        <input type="number" name="DiabetesPedigreeFunction" required><br>

        <label for="Age">Age:</label>
        <input type="number" name="Age" required><br>

        <button type="submit">Make Prediction</button>
    </form>

    <div id="predictionResult"></div>  <!-- Affichage du résultat de la prédiction -->

</body>
</html>
